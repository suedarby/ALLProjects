(function(a,b){a.FormWidget=a.EasyForms=b()})(window,function(){var c=f();function g(k){var l={autoOpen:false,closeButton:true,cssClass:[],closeLabel:"Close",closeMethods:["overlay","button","escape"],onClose:null,onOpen:null,beforeClose:null};this.options=i({},l,k);this.init()}g.prototype.init=function(){if(this.modal){return}a.call(this);d.call(this);document.body.insertBefore(this.modal,document.body.firstChild);if(this.options.autoOpen===true){this.open()}};g.prototype.destroy=function(){if(this.modal===null){return}b.call(this);this.modal.parentNode.removeChild(this.modal);this.modal=null};g.prototype.open=function(){if(this.modal.style.removeProperty){this.modal.style.removeProperty("display")}else{this.modal.style.removeAttribute("display")}document.body.classList.add("ef-enabled");this.modal.classList.add("ef-modal--open");var k=this;if(c){this.modal.addEventListener(c,function l(){if(typeof k.options.onOpen==="function"){k.options.onOpen.call(k)}k.modal.removeEventListener(c,l,false)},false)}else{if(typeof k.options.onOpen==="function"){k.options.onOpen.call(k)}}this.checkOverflow()};g.prototype.isOpen=function(){return !!this.modal.classList.contains("ef-modal--open")};g.prototype.close=function(){if(typeof this.options.beforeClose==="function"){var m=this.options.beforeClose.call(this);if(!m){return}}document.body.classList.remove("ef-enabled");this.modal.classList.remove("ef-modal--open");var k=this;if(c){this.modal.addEventListener(c,function l(){k.modal.removeEventListener(c,l,false);if(typeof k.options.onClose==="function"){k.options.onClose.call(this)}},false)}else{if(typeof k.options.onClose==="function"){k.options.onClose.call(this)}}};g.prototype.setContent=function(k){if(typeof k==="string"){this.modalBoxContent.innerHTML=k}else{this.modalBoxContent.innerHTML="";this.modalBoxContent.appendChild(k)}};g.prototype.getContent=function(){return this.modalBoxContent};g.prototype.isOverflow=function(){var l=window.innerHeight;var k=this.modalBox.clientHeight;return k>=l};g.prototype.checkOverflow=function(){if(this.modal.classList.contains("ef-modal--open")){if(this.isOverflow()){this.modal.classList.add("ef-modal--overflow")}else{this.modal.classList.remove("ef-modal--overflow")}}};function a(){this.modal=document.createElement("div");this.modal.classList.add("ef-modal");if(this.options.closeMethods.length===0||this.options.closeMethods.indexOf("overlay")===-1){this.modal.classList.add("ef-modal--noOverlayClose")}this.options.cssClass.forEach(function(k){if(typeof k==="string"){this.modal.classList.add(k)}},this);if(this.options.closeMethods.indexOf("button")!==-1){this.modalCloseBtn=document.createElement("button");this.modalCloseBtn.classList.add("ef-modal__close");this.modalCloseBtnIcon=document.createElement("span");this.modalCloseBtnIcon.classList.add("ef-modal__closeIcon");this.modalCloseBtnIcon.innerHTML="Ã—";this.modalCloseBtnLabel=document.createElement("span");this.modalCloseBtnLabel.classList.add("ef-modal__closeLabel");this.modalCloseBtnLabel.innerHTML=this.options.closeLabel;this.modalCloseBtn.appendChild(this.modalCloseBtnIcon);this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)}this.modalBox=document.createElement("div");this.modalBox.classList.add("ef-modal-box");this.modalBoxContent=document.createElement("div");this.modalBoxContent.classList.add("ef-modal-box__content");this.modalBox.appendChild(this.modalBoxContent);if(this.options.closeMethods.indexOf("button")!==-1){this.modal.appendChild(this.modalCloseBtn)}this.modal.appendChild(this.modalBox)}function d(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:j.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:h.bind(this)};if(this.options.closeMethods.indexOf("button")!==-1){this.modalCloseBtn.addEventListener("click",this._events.clickCloseBtn)}this.modal.addEventListener("mousedown",this._events.clickOverlay);window.addEventListener("resize",this._events.resize);document.addEventListener("keydown",this._events.keyboardNav)}function h(k){if(this.options.closeMethods.indexOf("escape")!==-1&&k.which===27&&this.isOpen()){this.close()}}function j(k){if(this.options.closeMethods.indexOf("overlay")!==-1&&!e(k.target,"ef-modal")&&k.clientX<this.modal.clientWidth){this.close()}}function e(l,k){while((l=l.parentElement)&&!l.classList.contains(k)){}return l}function b(){if(this.options.closeMethods.indexOf("button")!==-1){this.modalCloseBtn.removeEventListener("click",this._events.clickCloseBtn)}this.modal.removeEventListener("mousedown",this._events.clickOverlay);window.removeEventListener("resize",this._events.resize);document.removeEventListener("keydown",this._events.keyboardNav)}function i(){for(var l=1;l<arguments.length;l++){for(var k in arguments[l]){if(arguments[l].hasOwnProperty(k)){arguments[0][k]=arguments[l][k]}}}return arguments[0]}function f(){var k;var l=document.createElement("ef-transition");var m={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(k in m){if(l.style[k]!==undefined){return m[k]}}}return{Modal:g}});